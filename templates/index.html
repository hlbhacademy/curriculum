<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>課表查詢系統</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="max-w-6xl mx-auto px-4 py-6">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-3xl font-bold">課表查詢系統</h1>
      <form method="POST" action="/logout">
        <button class="text-sm text-blue-600 hover:underline">登出</button>
      </form>
    </div>
    <p class="text-sm text-gray-500 mb-4">登入帳號：{{ email }}</p>

    <!-- 查詢區塊 -->
    <div class="flex flex-wrap items-center gap-3 mb-6">
      <label class="font-semibold">查詢模式：</label>
      <label><input type="radio" name="mode" value="class" checked> 班級</label>
      <label><input type="radio" name="mode" value="teacher"> 教師</label>
      <label><input type="radio" name="mode" value="room"> 教室</label>

      <select id="target" class="ml-4 px-2 py-1 border rounded"></select>
    </div>

    <!-- 課表顯示區 -->
    <div class="overflow-x-auto">
      <table class="w-full border text-center text-sm">
        <thead class="bg-gray-200">
          <tr>
            <th class="w-20">節次</th>
            {% for day in range(1, 6) %}
              <th class="px-2 py-1">
                星期{{ '一二三四五'[day-1] }}<br />
                <span class="text-xs text-gray-500">{{ weekday_dates.get(day, '') }}</span>
              </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody id="scheduleBody">
          {% for p in range(1, 9) %}
            <tr class="border-b">
              <td class="bg-gray-100 font-medium">第{{ p }}節</td>
              {% for d in range(1, 6) %}
                <td class="bg-blue-50 cursor-pointer hover:bg-blue-100 transition" id="cell-{{ d }}-{{ p }}"></td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <p class="text-xs text-gray-500 mt-4">
      課表資料最後更新於 {{ yesterday }} 16:00，今日最新課表仍以教學組發布為準
    </p>
  </div>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black bg-opacity-30 hidden justify-center items-center z-50">
    <div class="bg-white w-full max-w-xl p-4 rounded shadow relative max-h-[80
